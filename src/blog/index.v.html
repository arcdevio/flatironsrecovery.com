<!-- {
    "title": "Recovery Blog | Flatirons Recovery",
    "description": "Our addiction recovery blog, updated regularly with original information about addiction, treatment and much more. Check back often!",
    "keywords": "professional team, compassionate therapists, treatment professional",
    "ogImage": "/blog/flatirons-peak.jpg"
} -->

<style>
    .main {
        background-image: url('/blog/flatirons-peak.jpg');
    }
    
</style>

<script src="/blog/data.js"></script>

<div class="main">
    <div class="gradient">
        <div>
            <h1>RECOVERY BLOG</h1>
            <h2>regularly updated resources for addiction recovery</h2>
        </div>
    </div>
</div>

<div class="wrap">
    <div class="row center-xs nav">
        <button class="active">All</button>
        <button>treatment</button>
        <button>mental health</button>
        <button>relationships</button>
        <button>community</button>
        <button>addictions</button>
    </div>
    <div class="row articles"></div>
</div>

<script>
    var articlesContainer = document.querySelector('.articles');
    var buttons = Array.prototype.slice.call(document.querySelectorAll('button'));

    for (var button of buttons) {
        button.addEventListener('click', function (e) {
            var value = e.target.innerHTML;
            var current = document.querySelector('.active');
            var list = Array.prototype.slice.call(articlesContainer.children);
            
            current.classList.remove('active');
            e.target.classList.toggle('active');
            
            for (var article of list) {
                article.hidden = article.id.includes(value) || value === 'All' ? false : true;
            }
        });
    }
    
    var filter = function () {
        for (var article of articles) {
            var column = document.createElement('div');
            var card = document.createElement('div');
            var anchor = document.createElement('a');
            var image = document.createElement('div');
            var body = document.createElement('div');
            var title = document.createElement('h3');
            var description = document.createElement('p');
            
            card.setAttribute('class', 'card');
            column.setAttribute('class', 'col-xs-12 col-md-6 col-lg-4');
            column.setAttribute('id', article.categories.join(' '));
            anchor.setAttribute('href', article.path);
            image.style.backgroundImage = 'url(' + article.image + ')';

            title.innerText = article.title;
            description.innerText = article.description;

            articlesContainer.appendChild(column);
            column.appendChild(card);
            card.appendChild(anchor);
            anchor.appendChild(image);
            anchor.appendChild(body);
            body.appendChild(title);
            body.appendChild(description);
        }
    }

    filter();
</script>